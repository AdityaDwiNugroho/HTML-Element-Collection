<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Countdown Timer Component</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }
    body {
      background: linear-gradient(135deg, #f0f4f8, #d9e2ec);
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }

    .countdown-container {
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      padding: 30px;
      max-width: 400px;
      width: 100%;
      text-align: center;
    }

    .countdown-container h2 {
      margin-bottom: 20px;
      font-size: 1.5rem;
    }

    .inputs {
      margin-bottom: 25px;
    }

    .inputs input[type="datetime-local"] {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }

    .options {
      margin-top: 10px;
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    .options label {
      font-size: 0.9rem;
      cursor: pointer;
    }

    .options input {
      margin-right: 4px;
    }

    .display {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 20px;
      font-size: 1.25rem;
    }

    .time-box {
      flex: 1;
      background: #eff1f5;
      border-radius: 8px;
      padding: 10px;
      position: relative;
      overflow: hidden;
    }

    .time-box span {
      display: block;
    }

    .time-box .number {
      font-size: 2rem;
      font-weight: bold;
    }

    .time-box .label {
      font-size: 0.85rem;
      color: #555;
    }

    .expired {
      margin-top: 20px;
      color: #d9534f;
      font-weight: bold;
      font-size: 1.2rem;
    }

    /* Simple pulse animation for the number when it updates */
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .pulse {
      animation: pulse 0.3s ease-out;
    }
  </style>
</head>
<body>

  <div class="countdown-container" aria-live="polite">
    <h2>Countdown Timer</h2>

    <div class="inputs">
      <input type="datetime-local" id="target-datetime" aria-label="Select target date and time" />
    </div>
    <div class="options">
      <label><input type="radio" name="format" value="full" checked /> D:H:M:S</label>
      <label><input type="radio" name="format" value="hms" /> H:M:S</label>
      <label><input type="radio" name="format" value="ms" /> M:S</label>
    </div>

    <div class="display" id="display">
      <div class="time-box" id="box-days">
        <span class="number" id="days">00</span>
        <span class="label">Days</span>
      </div>
      <div class="time-box" id="box-hours">
        <span class="number" id="hours">00</span>
        <span class="label">Hours</span>
      </div>
      <div class="time-box" id="box-minutes">
        <span class="number" id="minutes">00</span>
        <span class="label">Minutes</span>
      </div>
      <div class="time-box" id="box-seconds">
        <span class="number" id="seconds">00</span>
        <span class="label">Seconds</span>
      </div>
    </div>

    <div class="expired" id="expired-msg" style="display: none;">
      ðŸ•’ Time Up!
    </div>
  </div>

  <script>
    const inputEl = document.getElementById('target-datetime');
    const display = {
      days: document.getElementById('days'),
      hours: document.getElementById('hours'),
      minutes: document.getElementById('minutes'),
      seconds: document.getElementById('seconds')
    };
    const boxes = {
      days: document.getElementById('box-days'),
      hours: document.getElementById('box-hours'),
      minutes: document.getElementById('box-minutes'),
      seconds: document.getElementById('box-seconds')
    };

    const expiredMsg = document.getElementById('expired-msg');
    const formatRadios = document.querySelectorAll('input[name="format"]');

    let countdownInterval = null;
    let targetTime = null;

    function startCountdown() {
      if (!inputEl.value) return;
      targetTime = new Date(inputEl.value).getTime();
      if (isNaN(targetTime)) return;

      // Clear any existing interval
      if (countdownInterval) clearInterval(countdownInterval);

      updateCountdown();  // immediate call to avoid 1-sec delay
      countdownInterval = setInterval(updateCountdown, 1000);
    }

    function updateCountdown() {
      const now = Date.now();
      const diff = targetTime - now;

      if (diff <= 0) {
        clearInterval(countdownInterval);
        showExpired();
        return;
      }

      const d = Math.floor(diff / (1000 * 60 * 60 * 24));
      const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const s = Math.floor((diff % (1000 * 60)) / 1000);

      display.days.textContent = String(d).padStart(2, '0');
      display.hours.textContent = String(h).padStart(2, '0');
      display.minutes.textContent = String(m).padStart(2, '0');
      display.seconds.textContent = String(s).padStart(2, '0');

      // Add pulse effect
      for (let key of ['days','hours','minutes','seconds']) {
        boxes[key].classList.add('pulse');
        setTimeout(() => boxes[key].classList.remove('pulse'), 300);
      }

      expiredMsg.style.display = 'none';
    }

    function showExpired() {
      document.getElementById('display').style.display = 'none';
      expiredMsg.style.display = 'block';
    }

    inputEl.addEventListener('change', startCountdown);
    formatRadios.forEach(r => {
      r.addEventListener('change', () => {
        applyFormat();
      });
    });

    function applyFormat() {
      const fmt = document.querySelector('input[name="format"]:checked').value;
      if (fmt === 'full') {
        boxes.days.style.display = '';
        boxes.hours.style.display = '';
        boxes.minutes.style.display = '';
        boxes.seconds.style.display = '';
      } else if (fmt === 'hms') {
        boxes.days.style.display = 'none';
        boxes.hours.style.display = '';
        boxes.minutes.style.display = '';
        boxes.seconds.style.display = '';
      } else if (fmt === 'ms') {
        boxes.days.style.display = 'none';
        boxes.hours.style.display = 'none';
        boxes.minutes.style.display = '';
        boxes.seconds.style.display = '';
      }
    }

    // On load, apply initial format
    applyFormat();
  </script>

</body>
</html>
